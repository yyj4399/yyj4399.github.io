<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="keywords" content="博客,yyj4399,yyj4399,逐风的雪,坠入银河,时光梦境,孤独之域"/><meta name="description" content="码农，这是我的个人站点"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="author" content="yyj4399,1097575802@qq.com"/><meta name="generator" content="Visual Studio Code,React,React-Static"/><meta name="copyright" content="yyj4399"/><meta name="revisit-after" content="3 days"/><meta name="renderer" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta http-equiv="cache-control" content="no-cache"/><meta http-equiv="Cache-Control" content="no-siteapp"/><link rel="preload" as="script" href="/templates/vendors~__react_static_root__/src/containers/Post.3648edea.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/Post.97c37518.js"/><link rel="preload" as="script" href="/templates/styles.ddeb0f74.js"/><link rel="preload" as="script" href="/templates/vendors~main.3d624541.js"/><link rel="preload" as="script" href="/main.16a53e10.js"/><link rel="preload" as="style" href="/styles.4ae8cb5f.css"/><link rel="stylesheet" href="/styles.4ae8cb5f.css"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav><a href="/">Home</a><a href="/blog">Blog</a><a href="https://github.com/yyj4399">github</a></nav><div class="content"><div style="outline:none" tabindex="-1"><div><a href="/blog/">&lt;<!-- --> Back</a><br/><h1>react-static html头部meta问题</h1><h2>react-static生成的html头部信息修改问题</h2><h4>事情起因</h4><p><code>react-static</code> 生成的项目默认有一个默认的 <code>html</code> 模板，目录： <code>tmp/dev-server</code> 。</p><pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; data-reactroot=&quot;&quot;&gt;

&lt;head&gt;
    &lt;meta charSet=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no&quot; /&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre><p>然而，改这个文件然后 <code>yarn run build</code> 之后会发现，毫无变化。<br/>找到官方文档，有这么一段说明：</p><pre><code class="language-jsx">  // An optional custom React component that renders the base
  // Document for every page, including the dev server. If used, it must utilize the
  // `Html` , `Head` , `Body` and `children` for react-static to work. The optional
  // `siteProps` prop will contain any data returned by `getSiteProps` in your config
  // and `renderMeta` prop refers to any data you potentially assigned to it during
  // the custom `renderToHtml` hook.
  Document: ({ Html, Head, Body, children, siteProps, renderMeta }) =&gt; (
    &lt;Html lang=&quot;en-US&quot;&gt;
      &lt;Head&gt;
        &lt;meta charSet=&quot;UTF-8&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;
      &lt;/Head&gt;
      &lt;Body&gt;{children}&lt;/Body&gt;
    &lt;/Html&gt;
  ),</code></pre><p>ok，开搞。  </p><p>然而，事情并没有这么简单，加了这个配置后，问题又来了：</p><pre><code>Exporting HTML across 4 threads...
  ReferenceError: React is not defined</code></pre><p>???<br/>什么鬼？React-static里面没有引入React？开什么玩笑？<br/>去网上找了找，并没有找到解决方案，倒是发现不少 <code>react-static</code> 的广告文。。。<br/>得，只能自己动手。</p><h4>解决方案</h4><p>既然报了 <code>React is not defined</code> 错误，那我就个干脆手动引入吧。</p><pre><code class="language-js">import React from &quot;react&quot;</code></pre><p>问题解决。</p><h4>总结</h4><p><code>react-static</code> 不自动引入 <code>React</code> ，也是醉了。</p></div></div></div></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/Post\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"id\":1,\"userId\":1,\"title\":\"react-static html\u5934\u90E8meta\u95EE\u9898\",\"year\":\"2020\",\"month\":\"8\",\"path\":\"D:/phpstudy_pro/WWW/xiaoxiao/cat/src/md/2020/8/react-static html\u5934\u90E8meta\u95EE\u9898.md\",\"body\":\"## react-static\u751F\u6210\u7684html\u5934\u90E8\u4FE1\u606F\u4FEE\u6539\u95EE\u9898\\r\\n\\r\\n#### \u4E8B\u60C5\u8D77\u56E0\\r\\n\\r\\n`react-static` \u751F\u6210\u7684\u9879\u76EE\u9ED8\u8BA4\u6709\u4E00\u4E2A\u9ED8\u8BA4\u7684 `html` \u6A21\u677F\uFF0C\u76EE\u5F55\uFF1A `tmp/dev-server` \u3002\\r\\n\\r\\n``` html\\r\\n<!DOCTYPE html>\\r\\n<html lang=\\\"en\\\" data-reactroot=\\\"\\\">\\r\\n\\r\\n<head>\\r\\n    <meta charSet=\\\"UTF-8\\\" />\\r\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no\\\" />\\r\\n</head>\\r\\n\\r\\n<body>\\r\\n    <div id=\\\"root\\\"></div>\\r\\n</body>\\r\\n\\r\\n</html>\\r\\n```\\r\\n\\r\\n\u7136\u800C\uFF0C\u6539\u8FD9\u4E2A\u6587\u4EF6\u7136\u540E `yarn run build` \u4E4B\u540E\u4F1A\u53D1\u73B0\uFF0C\u6BEB\u65E0\u53D8\u5316\u3002  \\r\\n\u627E\u5230\u5B98\u65B9\u6587\u6863\uFF0C\u6709\u8FD9\u4E48\u4E00\u6BB5\u8BF4\u660E\uFF1A\\r\\n\\r\\n``` jsx\\r\\n  // An optional custom React component that renders the base\\r\\n  // Document for every page, including the dev server. If used, it must utilize the\\r\\n  // `Html` , `Head` , `Body` and `children` for react-static to work. The optional\\r\\n  // `siteProps` prop will contain any data returned by `getSiteProps` in your config\\r\\n  // and `renderMeta` prop refers to any data you potentially assigned to it during\\r\\n  // the custom `renderToHtml` hook.\\r\\n  Document: ({ Html, Head, Body, children, siteProps, renderMeta }) => (\\r\\n    <Html lang=\\\"en-US\\\">\\r\\n      <Head>\\r\\n        <meta charSet=\\\"UTF-8\\\" />\\r\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\r\\n      </Head>\\r\\n      <Body>{children}</Body>\\r\\n    </Html>\\r\\n  ),\\r\\n```\\r\\n\\r\\nok\uFF0C\u5F00\u641E\u3002  \\r\\n\\r\\n\u7136\u800C\uFF0C\u4E8B\u60C5\u5E76\u6CA1\u6709\u8FD9\u4E48\u7B80\u5355\uFF0C\u52A0\u4E86\u8FD9\u4E2A\u914D\u7F6E\u540E\uFF0C\u95EE\u9898\u53C8\u6765\u4E86\uFF1A\\r\\n\\r\\n``` \\r\\nExporting HTML across 4 threads...\\r\\n  ReferenceError: React is not defined\\r\\n```\\r\\n\\r\\n???  \\r\\n\u4EC0\u4E48\u9B3C\uFF1FReact-static\u91CC\u9762\u6CA1\u6709\u5F15\u5165React\uFF1F\u5F00\u4EC0\u4E48\u73A9\u7B11\uFF1F  \\r\\n\u53BB\u7F51\u4E0A\u627E\u4E86\u627E\uFF0C\u5E76\u6CA1\u6709\u627E\u5230\u89E3\u51B3\u65B9\u6848\uFF0C\u5012\u662F\u53D1\u73B0\u4E0D\u5C11 `react-static` \u7684\u5E7F\u544A\u6587\u3002\u3002\u3002  \\r\\n\u5F97\uFF0C\u53EA\u80FD\u81EA\u5DF1\u52A8\u624B\u3002\\r\\n\\r\\n#### \u89E3\u51B3\u65B9\u6848\\r\\n\\r\\n\u65E2\u7136\u62A5\u4E86 `React is not defined` \u9519\u8BEF\uFF0C\u90A3\u6211\u5C31\u4E2A\u5E72\u8106\u624B\u52A8\u5F15\u5165\u5427\u3002\\r\\n\\r\\n``` js\\r\\nimport React from \\\"react\\\"\\r\\n```\\r\\n\\r\\n\u95EE\u9898\u89E3\u51B3\u3002\\r\\n\\r\\n#### \u603B\u7ED3\\r\\n\\r\\n`react-static` \u4E0D\u81EA\u52A8\u5F15\u5165 `React` \uFF0C\u4E5F\u662F\u9189\u4E86\u3002\\r\\n\"}},\"path\":\"blog/post/1\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="/templates/vendors~__react_static_root__/src/containers/Post.3648edea.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/Post.97c37518.js"></script><script defer="" type="text/javascript" src="/templates/styles.ddeb0f74.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.3d624541.js"></script><script defer="" type="text/javascript" src="/main.16a53e10.js"></script></body></html>