{"template":"__react_static_root__/src/containers/Post","sharedHashesByProp":{},"data":{"post":{"id":1,"userId":1,"title":"react-static html头部meta问题","year":"2020","month":"8","path":"D:/phpstudy_pro/WWW/xiaoxiao/cat/src/md/2020/8/react-static html头部meta问题.md","body":"## react-static生成的html头部信息修改问题\r\n\r\n#### 事情起因\r\n\r\n`react-static` 生成的项目默认有一个默认的 `html` 模板，目录： `tmp/dev-server` 。\r\n\r\n``` html\r\n<!DOCTYPE html>\r\n<html lang=\"en\" data-reactroot=\"\">\r\n\r\n<head>\r\n    <meta charSet=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no\" />\r\n</head>\r\n\r\n<body>\r\n    <div id=\"root\"></div>\r\n</body>\r\n\r\n</html>\r\n```\r\n\r\n然而，改这个文件然后 `yarn run build` 之后会发现，毫无变化。  \r\n找到官方文档，有这么一段说明：\r\n\r\n``` jsx\r\n  // An optional custom React component that renders the base\r\n  // Document for every page, including the dev server. If used, it must utilize the\r\n  // `Html` , `Head` , `Body` and `children` for react-static to work. The optional\r\n  // `siteProps` prop will contain any data returned by `getSiteProps` in your config\r\n  // and `renderMeta` prop refers to any data you potentially assigned to it during\r\n  // the custom `renderToHtml` hook.\r\n  Document: ({ Html, Head, Body, children, siteProps, renderMeta }) => (\r\n    <Html lang=\"en-US\">\r\n      <Head>\r\n        <meta charSet=\"UTF-8\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n      </Head>\r\n      <Body>{children}</Body>\r\n    </Html>\r\n  ),\r\n```\r\n\r\nok，开搞。  \r\n\r\n然而，事情并没有这么简单，加了这个配置后，问题又来了：\r\n\r\n``` \r\nExporting HTML across 4 threads...\r\n  ReferenceError: React is not defined\r\n```\r\n\r\n???  \r\n什么鬼？React-static里面没有引入React？开什么玩笑？  \r\n去网上找了找，并没有找到解决方案，倒是发现不少 `react-static` 的广告文。。。  \r\n得，只能自己动手。\r\n\r\n#### 解决方案\r\n\r\n既然报了 `React is not defined` 错误，那我就个干脆手动引入吧。\r\n\r\n``` js\r\nimport React from \"react\"\r\n```\r\n\r\n问题解决。\r\n\r\n#### 总结\r\n\r\n`react-static` 不自动引入 `React` ，也是醉了。\r\n"}},"path":"blog/post/1"}
